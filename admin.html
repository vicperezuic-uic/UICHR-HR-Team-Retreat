<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin Panel - UIC Quiz</title>
<style>
  body { font-family: 'Segoe UI', sans-serif; background: #f4f6f9; margin: 0; padding: 20px; }
  h1 { color: #d50032; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; }
  th { background: #d50032; color: white; position: sticky; top: 0; z-index: 1; }
  tr:nth-child(even) { background-color: #f9f9f9; }
</style>
</head>
<body>
<h1>Admin Dashboard - UIC Quiz</h1>

<script>
  // Simple admin login
  const adminEmail = prompt("Enter admin email:");
  const adminPass = prompt("Enter admin password:");
  if(adminEmail !== "vicperez@uic.edu" || adminPass !== "Jujub1234!") {
    document.body.innerHTML = "<h2>Access Denied</h2>";
    throw new Error("Unauthorized");
  }

  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxialNjj-LDHMo6HU9wOoFCQS2llYUF7C8UfKNthTM2ChnJyVDkH7N9cGFAIxi5mtQL/exec";

  // Fetch submissions from Google Sheet
  fetch(WEB_APP_URL)
    .then(res => res.json())
    .then(data => renderTable(data))
    .catch(err => alert("Error loading submissions: " + err.message));

  function renderTable(data) {
    const table = document.createElement("table");
    const thead = document.createElement("thead");
    const tbody = document.createElement("tbody");

    // Header row from first row of sheet
    const headerRow = document.createElement("tr");
    data[0].forEach(header => {
      const th = document.createElement("th");
      th.textContent = header;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);

    // Data rows
    for(let i=1; i<data.length; i++){
      const row = document.createElement("tr");
      data[i].forEach(cell => {
        const td = document.createElement("td");
        td.textContent = cell;
        row.appendChild(td);
      });
      tbody.appendChild(row);
    }
    table.appendChild(tbody);
    document.body.appendChild(table);
  }
</script>
</body>
</html>
